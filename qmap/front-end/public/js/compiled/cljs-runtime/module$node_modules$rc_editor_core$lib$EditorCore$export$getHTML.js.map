{
"version":3,
"file":"module$node_modules$rc_editor_core$lib$EditorCore$export$getHTML.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/rc-editor-core/lib/EditorCore/export/getHTML.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_editor_core$lib$EditorCore$export$getHTML\"] = function(global,process,require,module,exports,shadow$shims) {\n'use strict';\n\nexports.__esModule = true;\nexports.DEFAULT_INLINE_STYLE = exports.DEFAULT_ELEMENT = exports.EMPTY_SET = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = GetHTML;\n\nvar _draftJs = require('draft-js');\n\nvar _immutable = require('immutable');\n\nvar _isUnitlessNumber = require('./isUnitlessNumber');\n\nvar _isUnitlessNumber2 = _interopRequireDefault(_isUnitlessNumber);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar EMPTY_SET = exports.EMPTY_SET = (0, _immutable.OrderedSet)();\nvar DEFAULT_ELEMENT = exports.DEFAULT_ELEMENT = 'span';\nvar DEFAULT_INLINE_STYLE = exports.DEFAULT_INLINE_STYLE = _draftJs.DefaultDraftInlineStyle;\nfunction encodeContent(text) {\n    return text.split('&').join('&amp;').split('<').join('&lt;').split('>').join('&gt;').split('\\xA0').join('&nbsp;').split('\\n').join('<br >' + '\\n');\n}\nfunction encodeAttr(text) {\n    return text.split('&').join('&amp;').split('<').join('&lt;').split('>').join('&gt;').split('\"').join('&quot;');\n}\nvar VENDOR_PREFIX = /^(moz|ms|o|webkit)-/;\nvar NUMERIC_STRING = /^\\d+$/;\nvar UPPERCASE_PATTERN = /([A-Z])/g;\n// Lifted from: https://github.com/facebook/react/blob/master/src/renderers/dom/shared/CSSPropertyOperations.js\nfunction processStyleName(name) {\n    return name.replace(UPPERCASE_PATTERN, '-$1').toLowerCase().replace(VENDOR_PREFIX, '-$1-');\n}\n// Lifted from: https://github.com/facebook/react/blob/master/src/renderers/dom/shared/dangerousStyleValue.js\nfunction processStyleValue(name, value) {\n    var isNumeric = void 0;\n    if (typeof value === 'string') {\n        isNumeric = NUMERIC_STRING.test(value);\n    } else {\n        isNumeric = true;\n        value = String(value);\n    }\n    if (!isNumeric || value === '0' || _isUnitlessNumber2['default'][name] === true) {\n        return value;\n    } else {\n        return value + 'px';\n    }\n}\nfunction getStyleText(styleObject) {\n    if (!styleObject) {\n        return '';\n    }\n    return Object.keys(styleObject).map(function (name) {\n        var styleName = processStyleName(name);\n        var styleValue = processStyleValue(name, styleObject[name]);\n        return styleName + ':' + styleValue;\n    }).join(';');\n}\nfunction getEntityContent(contentState, entityKey, content) {\n    if (entityKey) {\n        var entity = contentState.getEntity(entityKey);\n        var entityData = entity.getData();\n        if (entityData && entityData['export']) {\n            return entityData['export'](content, entityData);\n        }\n    }\n    return content;\n}\nfunction GetHTML(configStore) {\n    return function exportHtml(editorState) {\n        var contentState = editorState.getCurrentContent();\n        var blockMap = contentState.getBlockMap();\n        var customStyleMap = configStore.get('customStyleMap') || {};\n        var customBlockRenderMap = configStore.get('blockRenderMap') || {};\n        var customStyleFn = configStore.get('customStyleFn');\n        var toHTMLList = configStore.get('toHTMLList');\n        _extends(customStyleMap, DEFAULT_INLINE_STYLE);\n        return blockMap.map(function (block) {\n            var resultText = '<div>';\n            var closeTag = '</div>';\n            var lastPosition = 0;\n            var text = block.getText();\n            var blockType = block.getType();\n            var blockRender = customBlockRenderMap.get(blockType);\n            if (blockRender) {\n                var element = typeof blockRender.element === 'function' ? blockRender.elementTag || 'div' : 'div';\n                resultText = '<' + (element || 'div') + ' style=\"' + getStyleText(customBlockRenderMap.get(blockType).style || {}) + '\">';\n                closeTag = '</' + (element || 'div') + '>';\n            }\n            var charMetaList = block.getCharacterList();\n            var charEntity = null;\n            var prevCharEntity = null;\n            var ranges = [];\n            var rangeStart = 0;\n            for (var i = 0, len = text.length; i < len; i++) {\n                prevCharEntity = charEntity;\n                var meta = charMetaList.get(i);\n                charEntity = meta ? meta.getEntity() : null;\n                if (i > 0 && charEntity !== prevCharEntity) {\n                    ranges.push([prevCharEntity, getStyleRanges(text.slice(rangeStart, i), charMetaList.slice(rangeStart, i))]);\n                    rangeStart = i;\n                }\n            }\n            ranges.push([charEntity, getStyleRanges(text.slice(rangeStart), charMetaList.slice(rangeStart))]);\n            ranges.map(function (_ref) {\n                var entityKey = _ref[0],\n                    stylePieces = _ref[1];\n\n                var element = DEFAULT_ELEMENT;\n                var rawContent = stylePieces.map(function (_ref2) {\n                    var text = _ref2[0];\n                    return text;\n                }).join('');\n                var content = stylePieces.map(function (_ref3) {\n                    var text = _ref3[0],\n                        styleSet = _ref3[1];\n\n                    var encodedContent = encodeContent(text);\n                    if (styleSet.size) {\n                        var inlineStyle = {};\n                        styleSet.forEach(function (item) {\n                            if (customStyleMap.hasOwnProperty(item)) {\n                                var currentStyle = customStyleMap[item];\n                                inlineStyle = _extends(inlineStyle, currentStyle);\n                            }\n                        });\n                        var customedStyle = customStyleFn(styleSet);\n                        inlineStyle = _extends(inlineStyle, customedStyle);\n                        return '<span style=\"' + getStyleText(inlineStyle) + '\">' + encodedContent + '</span>';\n                    }\n                    return '<span>' + encodedContent + '</span>';\n                }).join('');\n                if (entityKey) {\n                    var entity = contentState.getEntity(entityKey);\n                    var entityData = entity.getData();\n                    if (entityData && entityData['export']) {\n                        resultText += entityData['export'](content, entityData);\n                    } else {\n                        var HTMLText = '';\n                        toHTMLList.forEach(function (toHTML) {\n                            var text = toHTML(rawContent, entity, contentState);\n                            if (text) {\n                                HTMLText = text;\n                            }\n                        });\n                        if (HTMLText) {\n                            resultText += HTMLText;\n                        }\n                    }\n                } else {\n                    resultText += content;\n                }\n            });\n            resultText += closeTag;\n            return resultText;\n        }).join('\\n');\n    };\n}\nfunction getStyleRanges(text, charMetaList) {\n    var charStyle = EMPTY_SET;\n    var prevCharStyle = EMPTY_SET;\n    var ranges = [];\n    var rangeStart = 0;\n    for (var i = 0, len = text.length; i < len; i++) {\n        prevCharStyle = charStyle;\n        var meta = charMetaList.get(i);\n        charStyle = meta ? meta.getStyle() : EMPTY_SET;\n        if (i > 0 && !(0, _immutable.is)(charStyle, prevCharStyle)) {\n            ranges.push([text.slice(rangeStart, i), prevCharStyle]);\n            rangeStart = i;\n        }\n    }\n    ranges.push([text.slice(rangeStart), charStyle]);\n    return ranges;\n}\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","__esModule","DEFAULT_INLINE_STYLE","DEFAULT_ELEMENT","EMPTY_SET","undefined","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","GetHTML","_draftJs","_immutable","_isUnitlessNumber","_isUnitlessNumber2","_interopRequireDefault","obj","OrderedSet","DefaultDraftInlineStyle","encodeContent","text","split","join","encodeAttr","VENDOR_PREFIX","NUMERIC_STRING","UPPERCASE_PATTERN","processStyleName","name","replace","toLowerCase","processStyleValue","value","isNumeric","test","String","getStyleText","styleObject","keys","map","styleName","styleValue","getEntityContent","contentState","entityKey","content","entity","getEntity","entityData","getData","configStore","exportHtml","editorState","getCurrentContent","blockMap","getBlockMap","customStyleMap","get","customBlockRenderMap","customStyleFn","toHTMLList","block","resultText","closeTag","lastPosition","getText","blockType","getType","blockRender","element","elementTag","style","charMetaList","getCharacterList","charEntity","prevCharEntity","ranges","rangeStart","len","meta","push","getStyleRanges","slice","_ref","stylePieces","rawContent","_ref2","_ref3","styleSet","encodedContent","size","inlineStyle","forEach","item","currentStyle","customedStyle","HTMLText","toHTML","charStyle","prevCharStyle","getStyle","is"]
}
