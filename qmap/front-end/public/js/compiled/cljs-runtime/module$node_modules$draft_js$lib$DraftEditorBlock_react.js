shadow$provide["module$node_modules$draft_js$lib$DraftEditorBlock_react"]=function(global,process,require,module,exports,shadow$shims){var _assign=require("module$node_modules$object_assign$index");var _extends=_assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");
}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,
enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var DraftEditorLeaf=require("module$node_modules$draft_js$lib$DraftEditorLeaf_react");var DraftOffsetKey=require("module$node_modules$draft_js$lib$DraftOffsetKey");var React=require("module$node_modules$react$index");var ReactDOM=require("module$node_modules$react_dom$index");var Scroll=require("module$node_modules$fbjs$lib$Scroll");var Style=
require("module$node_modules$fbjs$lib$Style");var UnicodeBidi=require("module$node_modules$fbjs$lib$UnicodeBidi");var UnicodeBidiDirection=require("module$node_modules$fbjs$lib$UnicodeBidiDirection");var cx=require("module$node_modules$fbjs$lib$cx");var getElementPosition=require("module$node_modules$fbjs$lib$getElementPosition");var getScrollPosition=require("module$node_modules$fbjs$lib$getScrollPosition");var getViewportDimensions=require("module$node_modules$fbjs$lib$getViewportDimensions");var invariant=
require("module$node_modules$fbjs$lib$invariant");var nullthrows=require("module$node_modules$fbjs$lib$nullthrows");var SCROLL_BUFFER=10;var isBlockOnSelectionEdge=function isBlockOnSelectionEdge(selection,key){return selection.getAnchorKey()===key||selection.getFocusKey()===key};var DraftEditorBlock=function(_React$Component){_inherits(DraftEditorBlock,_React$Component);function DraftEditorBlock(){_classCallCheck(this,DraftEditorBlock);return _possibleConstructorReturn(this,_React$Component.apply(this,
arguments))}DraftEditorBlock.prototype.shouldComponentUpdate=function shouldComponentUpdate(nextProps){return this.props.block!==nextProps.block||this.props.tree!==nextProps.tree||this.props.direction!==nextProps.direction||isBlockOnSelectionEdge(nextProps.selection,nextProps.block.getKey())&&nextProps.forceSelection};DraftEditorBlock.prototype.componentDidMount=function componentDidMount(){var selection=this.props.selection;var endKey=selection.getEndKey();if(!selection.getHasFocus()||endKey!==this.props.block.getKey())return;
var blockNode=ReactDOM.findDOMNode(this);var scrollParent=Style.getScrollParent(blockNode);var scrollPosition=getScrollPosition(scrollParent);var scrollDelta=void 0;if(scrollParent===window){var nodePosition=getElementPosition(blockNode);var nodeBottom=nodePosition.y+nodePosition.height;var viewportHeight=getViewportDimensions().height;scrollDelta=nodeBottom-viewportHeight;if(scrollDelta>0)window.scrollTo(scrollPosition.x,scrollPosition.y+scrollDelta+SCROLL_BUFFER)}else{!(blockNode instanceof HTMLElement)?
"development"!=="production"?invariant(false,"blockNode is not an HTMLElement"):invariant(false):void 0;var blockBottom=blockNode.offsetHeight+blockNode.offsetTop;var scrollBottom=scrollParent.offsetHeight+scrollPosition.y;scrollDelta=blockBottom-scrollBottom;if(scrollDelta>0)Scroll.setTop(scrollParent,Scroll.getTop(scrollParent)+scrollDelta+SCROLL_BUFFER)}};DraftEditorBlock.prototype._renderChildren=function _renderChildren(){var _this2=this;var block=this.props.block;var blockKey=block.getKey();
var text=block.getText();var lastLeafSet=this.props.tree.size-1;var hasSelection=isBlockOnSelectionEdge(this.props.selection,blockKey);return this.props.tree.map(function(leafSet,ii){var leavesForLeafSet=leafSet.get("leaves");var lastLeaf=leavesForLeafSet.size-1;var leaves=leavesForLeafSet.map(function(leaf,jj){var offsetKey=DraftOffsetKey.encode(blockKey,ii,jj);var start=leaf.get("start");var end=leaf.get("end");return React.createElement(DraftEditorLeaf,{key:offsetKey,offsetKey:offsetKey,block:block,
start:start,selection:hasSelection?_this2.props.selection:null,forceSelection:_this2.props.forceSelection,text:text.slice(start,end),styleSet:block.getInlineStyleAt(start),customStyleMap:_this2.props.customStyleMap,customStyleFn:_this2.props.customStyleFn,isLast:ii===lastLeafSet&&jj===lastLeaf})}).toArray();var decoratorKey=leafSet.get("decoratorKey");if(decoratorKey==null)return leaves;if(!_this2.props.decorator)return leaves;var decorator=nullthrows(_this2.props.decorator);var DecoratorComponent=
decorator.getComponentForKey(decoratorKey);if(!DecoratorComponent)return leaves;var decoratorProps=decorator.getPropsForKey(decoratorKey);var decoratorOffsetKey=DraftOffsetKey.encode(blockKey,ii,0);var decoratedText=text.slice(leavesForLeafSet.first().get("start"),leavesForLeafSet.last().get("end"));var dir=UnicodeBidiDirection.getHTMLDirIfDifferent(UnicodeBidi.getDirection(decoratedText),_this2.props.direction);return React.createElement(DecoratorComponent,_extends({},decoratorProps,{contentState:_this2.props.contentState,
decoratedText:decoratedText,dir:dir,key:decoratorOffsetKey,entityKey:block.getEntityAt(leafSet.get("start")),offsetKey:decoratorOffsetKey}),leaves)}).toArray()};DraftEditorBlock.prototype.render=function render(){var _props=this.props,direction=_props.direction,offsetKey=_props.offsetKey;var className=cx({"public/DraftStyleDefault/block":true,"public/DraftStyleDefault/ltr":direction==="LTR","public/DraftStyleDefault/rtl":direction==="RTL"});return React.createElement("div",{"data-offset-key":offsetKey,
className:className},this._renderChildren())};return DraftEditorBlock}(React.Component);module.exports=DraftEditorBlock}
//# sourceMappingURL=module$node_modules$draft_js$lib$DraftEditorBlock_react.js.map
