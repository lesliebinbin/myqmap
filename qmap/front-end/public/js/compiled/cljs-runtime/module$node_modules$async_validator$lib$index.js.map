{
"version":3,
"file":"module$node_modules$async_validator$lib$index.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/async-validator/lib/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$async_validator$lib$index\"] = function(global,process,require,module,exports,shadow$shims) {\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _util = require('./util');\n\nvar _validator = require('./validator/');\n\nvar _validator2 = _interopRequireDefault(_validator);\n\nvar _messages2 = require('./messages');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n *  Encapsulates a validation schema.\n *\n *  @param descriptor An object declaring validation rules\n *  for this schema.\n */\nfunction Schema(descriptor) {\n  this.rules = null;\n  this._messages = _messages2.messages;\n  this.define(descriptor);\n}\n\nSchema.prototype = {\n  messages: function messages(_messages) {\n    if (_messages) {\n      this._messages = (0, _util.deepMerge)((0, _messages2.newMessages)(), _messages);\n    }\n    return this._messages;\n  },\n  define: function define(rules) {\n    if (!rules) {\n      throw new Error('Cannot configure a schema with no rules');\n    }\n    if ((typeof rules === 'undefined' ? 'undefined' : (0, _typeof3['default'])(rules)) !== 'object' || Array.isArray(rules)) {\n      throw new Error('Rules must be an object');\n    }\n    this.rules = {};\n    var z = void 0;\n    var item = void 0;\n    for (z in rules) {\n      if (rules.hasOwnProperty(z)) {\n        item = rules[z];\n        this.rules[z] = Array.isArray(item) ? item : [item];\n      }\n    }\n  },\n  validate: function validate(source_) {\n    var _this = this;\n\n    var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var oc = arguments[2];\n\n    var source = source_;\n    var options = o;\n    var callback = oc;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (!this.rules || Object.keys(this.rules).length === 0) {\n      if (callback) {\n        callback();\n      }\n      return;\n    }\n    function complete(results) {\n      var i = void 0;\n      var field = void 0;\n      var errors = [];\n      var fields = {};\n\n      function add(e) {\n        if (Array.isArray(e)) {\n          errors = errors.concat.apply(errors, e);\n        } else {\n          errors.push(e);\n        }\n      }\n\n      for (i = 0; i < results.length; i++) {\n        add(results[i]);\n      }\n      if (!errors.length) {\n        errors = null;\n        fields = null;\n      } else {\n        for (i = 0; i < errors.length; i++) {\n          field = errors[i].field;\n          fields[field] = fields[field] || [];\n          fields[field].push(errors[i]);\n        }\n      }\n      callback(errors, fields);\n    }\n\n    if (options.messages) {\n      var messages = this.messages();\n      if (messages === _messages2.messages) {\n        messages = (0, _messages2.newMessages)();\n      }\n      (0, _util.deepMerge)(messages, options.messages);\n      options.messages = messages;\n    } else {\n      options.messages = this.messages();\n    }\n    var arr = void 0;\n    var value = void 0;\n    var series = {};\n    var keys = options.keys || Object.keys(this.rules);\n    keys.forEach(function (z) {\n      arr = _this.rules[z];\n      value = source[z];\n      arr.forEach(function (r) {\n        var rule = r;\n        if (typeof rule.transform === 'function') {\n          if (source === source_) {\n            source = (0, _extends3['default'])({}, source);\n          }\n          value = source[z] = rule.transform(value);\n        }\n        if (typeof rule === 'function') {\n          rule = {\n            validator: rule\n          };\n        } else {\n          rule = (0, _extends3['default'])({}, rule);\n        }\n        rule.validator = _this.getValidationMethod(rule);\n        rule.field = z;\n        rule.fullField = rule.fullField || z;\n        rule.type = _this.getType(rule);\n        if (!rule.validator) {\n          return;\n        }\n        series[z] = series[z] || [];\n        series[z].push({\n          rule: rule,\n          value: value,\n          source: source,\n          field: z\n        });\n      });\n    });\n    var errorFields = {};\n    (0, _util.asyncMap)(series, options, function (data, doIt) {\n      var rule = data.rule;\n      var deep = (rule.type === 'object' || rule.type === 'array') && ((0, _typeof3['default'])(rule.fields) === 'object' || (0, _typeof3['default'])(rule.defaultField) === 'object');\n      deep = deep && (rule.required || !rule.required && data.value);\n      rule.field = data.field;\n      function addFullfield(key, schema) {\n        return (0, _extends3['default'])({}, schema, {\n          fullField: rule.fullField + '.' + key\n        });\n      }\n\n      function cb() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        var errors = e;\n        if (!Array.isArray(errors)) {\n          errors = [errors];\n        }\n        if (errors.length) {\n          (0, _util.warning)('async-validator:', errors);\n        }\n        if (errors.length && rule.message) {\n          errors = [].concat(rule.message);\n        }\n\n        errors = errors.map((0, _util.complementError)(rule));\n\n        if (options.first && errors.length) {\n          errorFields[rule.field] = 1;\n          return doIt(errors);\n        }\n        if (!deep) {\n          doIt(errors);\n        } else {\n          // if rule is required but the target object\n          // does not exist fail at the rule level and don't\n          // go deeper\n          if (rule.required && !data.value) {\n            if (rule.message) {\n              errors = [].concat(rule.message).map((0, _util.complementError)(rule));\n            } else if (options.error) {\n              errors = [options.error(rule, (0, _util.format)(options.messages.required, rule.field))];\n            } else {\n              errors = [];\n            }\n            return doIt(errors);\n          }\n\n          var fieldsSchema = {};\n          if (rule.defaultField) {\n            for (var k in data.value) {\n              if (data.value.hasOwnProperty(k)) {\n                fieldsSchema[k] = rule.defaultField;\n              }\n            }\n          }\n          fieldsSchema = (0, _extends3['default'])({}, fieldsSchema, data.rule.fields);\n          for (var f in fieldsSchema) {\n            if (fieldsSchema.hasOwnProperty(f)) {\n              var fieldSchema = Array.isArray(fieldsSchema[f]) ? fieldsSchema[f] : [fieldsSchema[f]];\n              fieldsSchema[f] = fieldSchema.map(addFullfield.bind(null, f));\n            }\n          }\n          var schema = new Schema(fieldsSchema);\n          schema.messages(options.messages);\n          if (data.rule.options) {\n            data.rule.options.messages = options.messages;\n            data.rule.options.error = options.error;\n          }\n          schema.validate(data.value, data.rule.options || options, function (errs) {\n            doIt(errs && errs.length ? errors.concat(errs) : errs);\n          });\n        }\n      }\n\n      var res = rule.validator(rule, data.value, cb, data.source, options);\n      if (res && res.then) {\n        res.then(function () {\n          return cb();\n        }, function (e) {\n          return cb(e);\n        });\n      }\n    }, function (results) {\n      complete(results);\n    });\n  },\n  getType: function getType(rule) {\n    if (rule.type === undefined && rule.pattern instanceof RegExp) {\n      rule.type = 'pattern';\n    }\n    if (typeof rule.validator !== 'function' && rule.type && !_validator2['default'].hasOwnProperty(rule.type)) {\n      throw new Error((0, _util.format)('Unknown rule type %s', rule.type));\n    }\n    return rule.type || 'string';\n  },\n  getValidationMethod: function getValidationMethod(rule) {\n    if (typeof rule.validator === 'function') {\n      return rule.validator;\n    }\n    var keys = Object.keys(rule);\n    var messageIndex = keys.indexOf('message');\n    if (messageIndex !== -1) {\n      keys.splice(messageIndex, 1);\n    }\n    if (keys.length === 1 && keys[0] === 'required') {\n      return _validator2['default'].required;\n    }\n    return _validator2['default'][this.getType(rule)] || false;\n  }\n};\n\nSchema.register = function register(type, validator) {\n  if (typeof validator !== 'function') {\n    throw new Error('Cannot register a validator by type, validator is not a function');\n  }\n  _validator2['default'][type] = validator;\n};\n\nSchema.messages = _messages2.messages;\n\nexports['default'] = Schema;\nmodule.exports = exports['default'];\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","Object","defineProperty","value","_extends2","_extends3","_interopRequireDefault","_typeof2","_typeof3","_util","_validator","_validator2","_messages2","obj","__esModule","Schema","descriptor","rules","_messages","messages","define","prototype","deepMerge","newMessages","Error","Array","isArray","z","item","hasOwnProperty","validate","source_","_this","o","arguments","length","undefined","oc","source","options","callback","keys","complete","results","i","field","errors","fields","add","e","concat","apply","push","arr","series","forEach","r","rule","transform","validator","getValidationMethod","fullField","type","getType","errorFields","asyncMap","data","doIt","deep","defaultField","required","addFullfield","key","schema","cb","warning","message","map","complementError","first","error","format","fieldsSchema","k","f","fieldSchema","bind","errs","res","then","pattern","RegExp","messageIndex","indexOf","splice","register","Schema.register"]
}
