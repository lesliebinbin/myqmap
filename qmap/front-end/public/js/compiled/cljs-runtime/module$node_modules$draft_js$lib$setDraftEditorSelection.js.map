{
"version":3,
"file":"module$node_modules$draft_js$lib$setDraftEditorSelection.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/draft-js/lib/setDraftEditorSelection.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$draft_js$lib$setDraftEditorSelection\"] = function(global,process,require,module,exports,shadow$shims) {\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule setDraftEditorSelection\n * @format\n * \n */\n\n'use strict';\n\nvar DraftJsDebugLogging = require('./DraftJsDebugLogging');\n\nvar containsNode = require('fbjs/lib/containsNode');\nvar getActiveElement = require('fbjs/lib/getActiveElement');\nvar invariant = require('fbjs/lib/invariant');\n\nfunction getAnonymizedDOM(node, getNodeLabels) {\n  if (!node) {\n    return '[empty]';\n  }\n\n  var anonymized = anonymizeTextWithin(node, getNodeLabels);\n  if (anonymized.nodeType === Node.TEXT_NODE) {\n    return anonymized.textContent;\n  }\n\n  !(anonymized instanceof Element) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Node must be an Element if it is not a text node.') : invariant(false) : void 0;\n  return anonymized.outerHTML;\n}\n\nfunction anonymizeTextWithin(node, getNodeLabels) {\n  var labels = getNodeLabels !== undefined ? getNodeLabels(node) : [];\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    var length = node.textContent.length;\n    return document.createTextNode('[text ' + length + (labels.length ? ' | ' + labels.join(', ') : '') + ']');\n  }\n\n  var clone = node.cloneNode();\n  if (clone.nodeType === 1 && labels.length) {\n    clone.setAttribute('data-labels', labels.join(', '));\n  }\n  var childNodes = node.childNodes;\n  for (var ii = 0; ii < childNodes.length; ii++) {\n    clone.appendChild(anonymizeTextWithin(childNodes[ii], getNodeLabels));\n  }\n\n  return clone;\n}\n\nfunction getAnonymizedEditorDOM(node, getNodeLabels) {\n  // grabbing the DOM content of the Draft editor\n  var currentNode = node;\n  while (currentNode) {\n    if (currentNode instanceof Element && currentNode.hasAttribute('contenteditable')) {\n      // found the Draft editor container\n      return getAnonymizedDOM(currentNode, getNodeLabels);\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n  return 'Could not find contentEditable parent of node';\n}\n\nfunction getNodeLength(node) {\n  return node.nodeValue === null ? node.childNodes.length : node.nodeValue.length;\n}\n\n/**\n * In modern non-IE browsers, we can support both forward and backward\n * selections.\n *\n * Note: IE10+ supports the Selection object, but it does not support\n * the `extend` method, which means that even in modern IE, it's not possible\n * to programatically create a backward selection. Thus, for all IE\n * versions, we use the old IE API to create our selections.\n */\nfunction setDraftEditorSelection(selectionState, node, blockKey, nodeStart, nodeEnd) {\n  // It's possible that the editor has been removed from the DOM but\n  // our selection code doesn't know it yet. Forcing selection in\n  // this case may lead to errors, so just bail now.\n  if (!containsNode(document.documentElement, node)) {\n    return;\n  }\n\n  var selection = global.getSelection();\n  var anchorKey = selectionState.getAnchorKey();\n  var anchorOffset = selectionState.getAnchorOffset();\n  var focusKey = selectionState.getFocusKey();\n  var focusOffset = selectionState.getFocusOffset();\n  var isBackward = selectionState.getIsBackward();\n\n  // IE doesn't support backward selection. Swap key/offset pairs.\n  if (!selection.extend && isBackward) {\n    var tempKey = anchorKey;\n    var tempOffset = anchorOffset;\n    anchorKey = focusKey;\n    anchorOffset = focusOffset;\n    focusKey = tempKey;\n    focusOffset = tempOffset;\n    isBackward = false;\n  }\n\n  var hasAnchor = anchorKey === blockKey && nodeStart <= anchorOffset && nodeEnd >= anchorOffset;\n\n  var hasFocus = focusKey === blockKey && nodeStart <= focusOffset && nodeEnd >= focusOffset;\n\n  // If the selection is entirely bound within this node, set the selection\n  // and be done.\n  if (hasAnchor && hasFocus) {\n    selection.removeAllRanges();\n    addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    return;\n  }\n\n  if (!isBackward) {\n    // If the anchor is within this node, set the range start.\n    if (hasAnchor) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    }\n\n    // If the focus is within this node, we can assume that we have\n    // already set the appropriate start range on the selection, and\n    // can simply extend the selection.\n    if (hasFocus) {\n      addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    }\n  } else {\n    // If this node has the focus, set the selection range to be a\n    // collapsed range beginning here. Later, when we encounter the anchor,\n    // we'll use this information to extend the selection.\n    if (hasFocus) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    }\n\n    // If this node has the anchor, we may assume that the correct\n    // focus information is already stored on the selection object.\n    // We keep track of it, reset the selection range, and extend it\n    // back to the focus point.\n    if (hasAnchor) {\n      var storedFocusNode = selection.focusNode;\n      var storedFocusOffset = selection.focusOffset;\n\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n      addFocusToSelection(selection, storedFocusNode, storedFocusOffset, selectionState);\n    }\n  }\n}\n\n/**\n * Extend selection towards focus point.\n */\nfunction addFocusToSelection(selection, node, offset, selectionState) {\n  var activeElement = getActiveElement();\n  if (selection.extend && containsNode(activeElement, node)) {\n    // If `extend` is called while another element has focus, an error is\n    // thrown. We therefore disable `extend` if the active element is somewhere\n    // other than the node we are selecting. This should only occur in Firefox,\n    // since it is the only browser to support multiple selections.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=921444.\n\n    // logging to catch bug that is being reported in t16250795\n    if (offset > getNodeLength(node)) {\n      // the call to 'selection.extend' is about to throw\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node),\n        extraParams: JSON.stringify({ offset: offset }),\n        selectionState: JSON.stringify(selectionState.toJS())\n      });\n    }\n\n    // logging to catch bug that is being reported in t18110632\n    var nodeWasFocus = node === selection.focusNode;\n    try {\n      selection.extend(node, offset);\n    } catch (e) {\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node, function (n) {\n          var labels = [];\n          if (n === activeElement) {\n            labels.push('active element');\n          }\n          if (n === selection.anchorNode) {\n            labels.push('selection anchor node');\n          }\n          if (n === selection.focusNode) {\n            labels.push('selection focus node');\n          }\n          return labels;\n        }),\n        extraParams: JSON.stringify({\n          activeElementName: activeElement ? activeElement.nodeName : null,\n          nodeIsFocus: node === selection.focusNode,\n          nodeWasFocus: nodeWasFocus,\n          selectionRangeCount: selection.rangeCount,\n          selectionAnchorNodeName: selection.anchorNode ? selection.anchorNode.nodeName : null,\n          selectionAnchorOffset: selection.anchorOffset,\n          selectionFocusNodeName: selection.focusNode ? selection.focusNode.nodeName : null,\n          selectionFocusOffset: selection.focusOffset,\n          message: e ? '' + e : null,\n          offset: offset\n        }, null, 2),\n        selectionState: JSON.stringify(selectionState.toJS(), null, 2)\n      });\n      // allow the error to be thrown -\n      // better than continuing in a broken state\n      throw e;\n    }\n  } else {\n    // IE doesn't support extend. This will mean no backward selection.\n    // Extract the existing selection range and add focus to it.\n    // Additionally, clone the selection range. IE11 throws an\n    // InvalidStateError when attempting to access selection properties\n    // after the range is detached.\n    var range = selection.getRangeAt(0);\n    range.setEnd(node, offset);\n    selection.addRange(range.cloneRange());\n  }\n}\n\nfunction addPointToSelection(selection, node, offset, selectionState) {\n  var range = document.createRange();\n  // logging to catch bug that is being reported in t16250795\n  if (offset > getNodeLength(node)) {\n    // in this case we know that the call to 'range.setStart' is about to throw\n    DraftJsDebugLogging.logSelectionStateFailure({\n      anonymizedDom: getAnonymizedEditorDOM(node),\n      extraParams: JSON.stringify({ offset: offset }),\n      selectionState: JSON.stringify(selectionState.toJS())\n    });\n  }\n  range.setStart(node, offset);\n  selection.addRange(range);\n}\n\nmodule.exports = setDraftEditorSelection;\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","DraftJsDebugLogging","containsNode","getActiveElement","invariant","getAnonymizedDOM","node","getNodeLabels","anonymized","anonymizeTextWithin","nodeType","Node","TEXT_NODE","textContent","Element","NODE_ENV","outerHTML","labels","undefined","length","document","createTextNode","join","clone","cloneNode","setAttribute","childNodes","ii","appendChild","getAnonymizedEditorDOM","currentNode","hasAttribute","parentNode","getNodeLength","nodeValue","setDraftEditorSelection","selectionState","blockKey","nodeStart","nodeEnd","documentElement","selection","getSelection","anchorKey","getAnchorKey","anchorOffset","getAnchorOffset","focusKey","getFocusKey","focusOffset","getFocusOffset","isBackward","getIsBackward","extend","tempKey","tempOffset","hasAnchor","hasFocus","removeAllRanges","addPointToSelection","addFocusToSelection","storedFocusNode","focusNode","storedFocusOffset","offset","activeElement","logSelectionStateFailure","anonymizedDom","extraParams","JSON","stringify","toJS","nodeWasFocus","e","n","push","anchorNode","activeElementName","nodeName","nodeIsFocus","selectionRangeCount","rangeCount","selectionAnchorNodeName","selectionAnchorOffset","selectionFocusNodeName","selectionFocusOffset","message","range","getRangeAt","setEnd","addRange","cloneRange","createRange","setStart"]
}
