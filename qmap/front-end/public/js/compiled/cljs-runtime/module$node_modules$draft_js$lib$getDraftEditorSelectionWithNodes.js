shadow$provide["module$node_modules$draft_js$lib$getDraftEditorSelectionWithNodes"]=function(global,process,require,module,exports,shadow$shims){var findAncestorOffsetKey=require("module$node_modules$draft_js$lib$findAncestorOffsetKey");var getSelectionOffsetKeyForNode=require("module$node_modules$draft_js$lib$getSelectionOffsetKeyForNode");var getUpdatedSelectionState=require("module$node_modules$draft_js$lib$getUpdatedSelectionState");var invariant=require("module$node_modules$fbjs$lib$invariant");
var nullthrows=require("module$node_modules$fbjs$lib$nullthrows");function getDraftEditorSelectionWithNodes(editorState,root,anchorNode,anchorOffset,focusNode,focusOffset){var anchorIsTextNode=anchorNode.nodeType===Node.TEXT_NODE;var focusIsTextNode=focusNode.nodeType===Node.TEXT_NODE;if(anchorIsTextNode&&focusIsTextNode)return{selectionState:getUpdatedSelectionState(editorState,nullthrows(findAncestorOffsetKey(anchorNode)),anchorOffset,nullthrows(findAncestorOffsetKey(focusNode)),focusOffset),needsRecovery:false};
var anchorPoint=null;var focusPoint=null;var needsRecovery=true;if(anchorIsTextNode){anchorPoint={key:nullthrows(findAncestorOffsetKey(anchorNode)),offset:anchorOffset};focusPoint=getPointForNonTextNode(root,focusNode,focusOffset)}else if(focusIsTextNode){focusPoint={key:nullthrows(findAncestorOffsetKey(focusNode)),offset:focusOffset};anchorPoint=getPointForNonTextNode(root,anchorNode,anchorOffset)}else{anchorPoint=getPointForNonTextNode(root,anchorNode,anchorOffset);focusPoint=getPointForNonTextNode(root,
focusNode,focusOffset);if(anchorNode===focusNode&&anchorOffset===focusOffset)needsRecovery=!!anchorNode.firstChild&&anchorNode.firstChild.nodeName!=="BR"}return{selectionState:getUpdatedSelectionState(editorState,anchorPoint.key,anchorPoint.offset,focusPoint.key,focusPoint.offset),needsRecovery:needsRecovery}}function getFirstLeaf(node){while(node.firstChild&&(node.firstChild instanceof Element&&node.firstChild.getAttribute("data-blocks")==="true"||getSelectionOffsetKeyForNode(node.firstChild)))node=
node.firstChild;return node}function getLastLeaf(node){while(node.lastChild&&(node.lastChild instanceof Element&&node.lastChild.getAttribute("data-blocks")==="true"||getSelectionOffsetKeyForNode(node.lastChild)))node=node.lastChild;return node}function getPointForNonTextNode(editorRoot,startNode,childOffset){var node=startNode;var offsetKey=findAncestorOffsetKey(node);!(offsetKey!=null||editorRoot&&(editorRoot===node||editorRoot.firstChild===node))?"development"!=="production"?invariant(false,"Unknown node in selection range."):
invariant(false):void 0;if(editorRoot===node){node=node.firstChild;!(node instanceof Element&&node.getAttribute("data-contents")==="true")?"development"!=="production"?invariant(false,"Invalid DraftEditorContents structure."):invariant(false):void 0;if(childOffset>0)childOffset=node.childNodes.length}if(childOffset===0){var key=null;if(offsetKey!=null)key=offsetKey;else{var firstLeaf=getFirstLeaf(node);key=nullthrows(getSelectionOffsetKeyForNode(firstLeaf))}return{key:key,offset:0}}var nodeBeforeCursor=
node.childNodes[childOffset-1];var leafKey=null;var textLength=null;if(!getSelectionOffsetKeyForNode(nodeBeforeCursor)){leafKey=nullthrows(offsetKey);textLength=getTextContentLength(nodeBeforeCursor)}else{var lastLeaf=getLastLeaf(nodeBeforeCursor);leafKey=nullthrows(getSelectionOffsetKeyForNode(lastLeaf));textLength=getTextContentLength(lastLeaf)}return{key:leafKey,offset:textLength}}function getTextContentLength(node){var textContent=node.textContent;return textContent==="\n"?0:textContent.length}
module.exports=getDraftEditorSelectionWithNodes}
//# sourceMappingURL=module$node_modules$draft_js$lib$getDraftEditorSelectionWithNodes.js.map
